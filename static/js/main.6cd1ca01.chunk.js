(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{371:function(e,t,r){e.exports=r(454)},376:function(e,t,r){},453:function(e,t,r){},454:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(16),s=r.n(c),o=(r(376),r(20)),i=r.n(o),u=r(36),f=r(86),l=r(25),d=r(193),p=r(339),v=r.n(p),b=("http://".concat("localhost",":").concat(5e3),v.a.create({baseURL:"https://cheq-home-assignment.herokuapp.com/v1/vasts"})),O=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/fetch_vasts");case 2:return t=e.sent,r=t.data.vasts,e.abrupt("return",r.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(f.a)({},t.id,t))}),{}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.post("/create_vast",{position:t,height:n,width:r,vastUrl:a});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n,a,c,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.vastId,n=t.position,a=t.width,c=t.height,s=t.vastUrl,e.next=3,b.post("/edit_vast",{vastId:r,position:n,height:c,width:a,vastUrl:s});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.delete("?id=".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("?id=".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e,t,r){var c=a.a.createContext();return{Context:c,Provider:function(s){var o=s.children,i=Object(n.useReducer)(e,r),u=Object(d.a)(i,2),p=u[0],v=u[1],b=Object.keys(t).reduce((function(e,r){return Object(l.a)(Object(l.a)({},e),{},Object(f.a)({},r,t[r](v)))}),{});return a.a.createElement(c.Provider,{value:Object(l.a)({state:p},b)},o)}}}((function(e,t){var r=t.type,n=t.payload;switch(r){case"SET_ERROR":var a=n.error;return Object(l.a)(Object(l.a)({},e),{},{error:a,loading:!1});case"ADD_VAST":var c=n.vast;return Object(l.a)(Object(l.a)({},e),{},{error:"",loading:!1,vasts:Object(l.a)(Object(l.a)({},e.vasts),{},Object(f.a)({},c.id,c))});case"SET_VASTS":var s=n.vasts;return Object(l.a)(Object(l.a)({},e),{},{loading:!0,vasts:s,error:""});case"UPDATE_VAST":var o=n.patched,i=e.vasts[o.id];return Object(l.a)(Object(l.a)({},e),{},{vasts:Object(l.a)(Object(l.a)({},e.vasts),{},Object(f.a)({},i.id,o)),loading:!1,error:""});case"REMOVE_VAST":var u=n.id;return Object(l.a)(Object(l.a)({},e),{},{vasts:Object.keys(e.vasts).filter((function(e){return e.id!==u})),loading:!1,error:""});default:return e}}),{addVast:function(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var n,a,c,s,o,u,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.position,a=r.width,c=r.height,s=r.vastUrl,t.prev=1,t.next=4,h(n,c,a,s);case 4:o=t.sent,u=o.data,e({type:"ADD_VAST",payload:{vast:u}}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),f=t.t0.response?t.t0.response.data:t.t0.message,console.error(f),e({type:"SET_ERROR",payload:{error:f}});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateVast:function(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var n,a,c,s,o,u,f,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.vastId,a=r.position,c=r.width,s=r.height,o=r.vastUrl,t.prev=1,t.next=4,j({vastId:n,position:a,height:s,width:c,vastUrl:o});case 4:u=t.sent,f=u.data,e({type:"UPDATE_VAST",payload:{patched:f}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),l=t.t0.response?t.t0.response.data:t.t0.message,console.error(l),e({type:"SET_ERROR",payload:{error:l}});case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},fetchVasts:function(e){return Object(u.a)(i.a.mark((function t(){var r,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O();case 3:r=t.sent,e({type:"SET_VASTS",payload:{vasts:r}}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.response?t.t0.response.data:t.t0.message,console.error(n),e({type:"SET_ERROR",payload:{error:n}});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))},removeVast:function(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(r);case 3:t.sent,e({type:"REMOVE_VAST",payload:{id:r}}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.response?t.t0.response.data:t.t0.message,console.error(n),e({type:"SET_ERROR",payload:{error:n}});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},{vasts:[],loading:!1,error:"",meta:{}}),E=g.Provider,R=g.Context,x=r(340),y=r.n(x),k=r(351),S=r.n(k),V=r(361),A=r.n(V),T=r(352),U=r.n(T),_=r(359),P=r.n(_),C=r(233),D=r.n(C),L=r(232),I=r.n(L),B=r(353),M=r.n(B),W=r(354),F=r.n(W),J=r(356),N=r.n(J),q=r(357),H=r.n(q),X=r(358),$=r.n(X),z=r(362),G=r.n(z),K=r(355),Q=r.n(K),Y=r(360),Z=r.n(Y),ee=r(363),te=r.n(ee),re=r(344),ne=r(349),ae=r.n(ne),ce=r(350),se=r.n(ce);function oe(){var e=Object(re.a)(["\n  background-color: rgba(0, 0, 0, 0.2);\n  display: inline;\n  padding: 6px;\n  border-radius: 5px;\n  &:hover {\n    cursor: pointer;\n  }\n"]);return oe=function(){return e},e}var ie=r(345).a.div(oe()),ue=function(e){return a.a.createElement(ie,e,a.a.createElement(ae.a,{style:{verticalAlign:"bottom"}}),a.a.createElement("text",null,"Xml"),a.a.createElement(se.a,{style:{verticalAlign:"bottom"}}))},fe={Add:Object(n.forwardRef)((function(e,t){return a.a.createElement(S.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return a.a.createElement(U.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return a.a.createElement(I.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return a.a.createElement(M.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return a.a.createElement(D.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return a.a.createElement(F.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return a.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return a.a.createElement(N.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(H.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return a.a.createElement($.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(D.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(P.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return a.a.createElement(I.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return a.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return a.a.createElement(A.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return a.a.createElement(G.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return a.a.createElement(te.a,Object.assign({},e,{ref:t}))}))};function le(){var e=Object(n.useContext)(R),t=e.state,r=t.vasts,c=t.error,s=e.fetchVasts,o=e.addVast,f=e.updateVast,p=e.removeVast;Object(n.useEffect)((function(){0===r.length&&s()}),[]);var v=Object(n.useCallback)(function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:r=e.sent,n=new Blob([r],{type:"text/xml"}),a=URL.createObjectURL(n),window.open(a),URL.revokeObjectURL(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),b=a.a.useState({columns:[{title:"Vast Url",field:"vastUrl"},{title:"Position",field:"position"},{title:"Width",field:"width",type:"numeric"},{title:"Height",field:"height",type:"numeric"},{title:"Actions",align:"right",readOnly:!0,render:function(e){return a.a.createElement(ue,{onClick:function(){return v(e.id)},id:e.id})}}]}),O=Object(d.a)(b,2),h=O[0];O[1];return a.a.createElement(y.a,{title:a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("span",{style:{flex:1}},"Vasts Table"),c&&a.a.createElement("div",{style:{marginLeft:"30px",color:"red"}},c.message)),columns:h.columns,data:Object.values(r),icons:fe,editable:{onRowAdd:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addRow",t),e.next=3,o(t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onRowUpdate:function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addRow",r.id,t),e.next=3,f(Object(l.a)({vastId:r.id},t));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),onRowDelete:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("removeRow",t.id),e.next=3,p(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})}r(453);var de=function(){return a.a.createElement(E,null,a.a.createElement("div",{className:"App"},a.a.createElement(le,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[371,1,2]]]);
//# sourceMappingURL=main.6cd1ca01.chunk.js.map